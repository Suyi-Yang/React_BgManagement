[{"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\App.js":"1","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\index.js":"2","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\login\\login.jsx":"3","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\api\\ajax.js":"4","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\api\\index.js":"5","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\memoryUtils.js":"6","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\admin\\admin.jsx":"7","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\storageUtils.js":"8","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\left-nav\\index.jsx":"9","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\header\\index.jsx":"10","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\home\\home.jsx":"11","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\category.jsx":"12","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\product.jsx":"13","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\line\\line.jsx":"14","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\user\\user.jsx":"15","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\pie\\pie.jsx":"16","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\config\\menuConfig.js":"17","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\dateUtils.js":"18","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\link-btn\\index.jsx":"19","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\Updatecategory.jsx":"20","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\role.jsx":"21","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\category-test\\Addcategory.jsx":"22","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\Addcategory.jsx":"23","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\detail.jsx":"24","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\home.jsx":"25","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\constants.js":"26","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\add-update.jsx":"27","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\pictures-wall.jsx":"28","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\bar\\bar.jsx":"29","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\rich-text-editor.jsx":"30","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\AddCategory.jsx":"31","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\UpdateCategory.jsx":"32","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\AddRole.jsx":"33","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\UpdateRole.jsx":"34"},{"size":533,"mtime":1611625858147,"results":"35","hashOfConfig":"36"},{"size":473,"mtime":1611662385300,"results":"37","hashOfConfig":"36"},{"size":4802,"mtime":1611718842304,"results":"38","hashOfConfig":"36"},{"size":1114,"mtime":1611659833437,"results":"39","hashOfConfig":"36"},{"size":3925,"mtime":1612348103077,"results":"40","hashOfConfig":"36"},{"size":116,"mtime":1611660877319,"results":"41","hashOfConfig":"36"},{"size":1914,"mtime":1612253490335,"results":"42","hashOfConfig":"36"},{"size":655,"mtime":1611662070932,"results":"43","hashOfConfig":"36"},{"size":3491,"mtime":1612085844211,"results":"44","hashOfConfig":"36"},{"size":3568,"mtime":1612261772394,"results":"45","hashOfConfig":"36"},{"size":246,"mtime":1611808289258,"results":"46","hashOfConfig":"36"},{"size":5536,"mtime":1612320059096,"results":"47","hashOfConfig":"36"},{"size":675,"mtime":1612076245178,"results":"48","hashOfConfig":"36"},{"size":178,"mtime":1611721065135,"results":"49","hashOfConfig":"36"},{"size":181,"mtime":1611720926746,"results":"50","hashOfConfig":"36"},{"size":173,"mtime":1611721086898,"results":"51","hashOfConfig":"36"},{"size":1439,"mtime":1611723638769,"results":"52","hashOfConfig":"36"},{"size":924,"mtime":1611803917468,"results":"53","hashOfConfig":"36"},{"size":194,"mtime":1611807729166,"results":"54","hashOfConfig":"36"},{"size":2061,"mtime":1612319974401,"results":"55","hashOfConfig":"36"},{"size":3766,"mtime":1612354216203,"results":"56","hashOfConfig":"36"},{"size":2522,"mtime":1611930021037,"results":"57","hashOfConfig":"36"},{"size":2456,"mtime":1612319968020,"results":"58","hashOfConfig":"36"},{"size":3264,"mtime":1612153036701,"results":"59","hashOfConfig":"36"},{"size":4643,"mtime":1612171590054,"results":"60","hashOfConfig":"36"},{"size":307,"mtime":1612347600686,"results":"61","hashOfConfig":"36"},{"size":9210,"mtime":1612259313663,"results":"62","hashOfConfig":"36"},{"size":4654,"mtime":1612258950407,"results":"63","hashOfConfig":"36"},{"size":176,"mtime":1611721038620,"results":"64","hashOfConfig":"36"},{"size":2800,"mtime":1612256631931,"results":"65","hashOfConfig":"36"},{"size":2456,"mtime":1612319991522,"results":"66","hashOfConfig":"36"},{"size":2061,"mtime":1612319982433,"results":"67","hashOfConfig":"36"},{"size":1594,"mtime":1612323251672,"results":"68","hashOfConfig":"36"},{"size":2015,"mtime":1612353119039,"results":"69","hashOfConfig":"36"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},"dqx17m",{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"75"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"82","messages":"83","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"84","usedDeprecatedRules":"85"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"90","usedDeprecatedRules":"91"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"98"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"72"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"105"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"105"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"110"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"117","messages":"118","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"121","messages":"122","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"127"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"105"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"132","messages":"133","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"134"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\App.js",[],["149","150"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\index.js",[],["151","152"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\login\\login.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\api\\ajax.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\api\\index.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\memoryUtils.js",["153"],"/* 用来在内存保存一些数据的工具模块 */\r\nexport default {\r\n  user: {}, //保存当前登录的user\r\n}",["154","155"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\admin\\admin.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\storageUtils.js",["156"],"/* 进行local数据存储管理的工具模块 */\r\nimport store from 'store'\r\n\r\nconst USER_KEY = 'user_key'\r\nexport default {  \r\n  saveUser(user){ //保存user\r\n    store.set(USER_KEY, user)\r\n  },  \r\n  getUser(){ //读取user\r\n    return store.get(USER_KEY) || {}\r\n  },  \r\n  removeUser(){ //删除user\r\n    store.remove(USER_KEY)\r\n  }\r\n}\r\n\r\n//原生写法\r\n/* export default {  \r\n  saveUser(user){ //保存user\r\n    localStorage.setItem(USER_KEY, JSON.stringify(user))\r\n  },  \r\n  getUser(){ //读取user\r\n    return JSON.parse(localStorage.getItem(USER_KEY) || '{}')\r\n  },  \r\n  removeUser(){ //删除user\r\n    localStorage.removeItem(USER_KEY)\r\n  }\r\n} */",["157","158"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\left-nav\\index.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\header\\index.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\home\\home.jsx",[],["159","160"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\category.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\product.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\line\\line.jsx",[],["161","162"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\user\\user.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\pie\\pie.jsx",[],["163","164"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\config\\menuConfig.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\dateUtils.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\link-btn\\index.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\Updatecategory.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\role.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\category-test\\Addcategory.jsx",["165"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\Addcategory.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\detail.jsx",[],["166","167"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\home.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\constants.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\add-update.jsx",["168"],"/* Product的[添加和更新的]子路由组件 */\r\nimport React, { Component } from \"react\";\r\nimport { Card, Form, Input, Button, Cascader, message } from \"antd\";\r\nimport { ArrowLeftOutlined } from '@ant-design/icons';\r\n\r\nimport LinkButton from '../../components/link-btn'\r\nimport PicturesWall from \"./pictures-wall\";\r\nimport RichTextEditor from \"./rich-text-editor\";\r\nimport {reqCategorys,reqAddOrUpdateProduct} from '../../api'\r\n\r\nexport default class ProductAddUpdate extends Component {\r\n  state = {\r\n    options: [], //一级列表项\r\n  }\r\n  constructor(props){\r\n    super(props)\r\n    //创建用来保存ref标识的标签对象的容器\r\n    this.pw = React.createRef() //商品图片\r\n    this.editor = React.createRef() //商品详情\r\n  }\r\n  //【分类】初始化选项列表(一级)\r\n  initOptions = async (categorys)=>{\r\n    //根据categorys生成options的数组\r\n    const options = categorys.map(c=>({\r\n      value: c._id,\r\n      label: c.name,\r\n      isLeaf: false, //不是叶子(即不是最后一级)\r\n    }))\r\n\r\n    //【修改商品】[二级分类商品]的[更新]\r\n    const {isUpdate,product} = this\r\n    const {pCategoryId} = product\r\n    if(isUpdate && pCategoryId!=='0'){ //如果是一个[二级分类商品]的[更新]\r\n      //获取对应的二级分类列表\r\n      const subCategorys = await this.getCategorys(pCategoryId)\r\n      //生成二级下拉列表的options\r\n      const childOptions = subCategorys.map(c=>({\r\n        value: c._id,\r\n        label: c.name,\r\n        isLeaf: true\r\n      }))\r\n      //找到当前商品对应的一级option对象\r\n      const targetOption = options.find(option => option.value===pCategoryId)\r\n      //关联到对应的一级option上\r\n      targetOption.children = childOptions\r\n    }\r\n\r\n    //更新options的状态\r\n    this.setState({options})\r\n  }\r\n  //【分类】异步获取一级/二级分类列表 并显示\r\n  getCategorys = async (parentId)=>{\r\n    const result = await reqCategorys(parentId) //{status:0,data:categorys}\r\n    if(result.status===0){\r\n      const categorys = result.data\r\n      if(parentId==='0'){ //一级分类列表\r\n        this.initOptions(categorys) //初始化选项列表(一级) 并显示\r\n      }else{ //二级分类列表\r\n        return categorys //返回二级列表的categorys\r\n        /* 当前async函数返回的promise会成功 且value为categorys */\r\n      }\r\n    }\r\n  }\r\n  //【分类】选项变化\r\n  onChange = (value, selectedOptions) => {\r\n    // console.log(value, selectedOptions);\r\n  };\r\n  //【分类】用于加载下一级列表的回调函数\r\n  loadData = async selectedOptions => {\r\n    const {options} = this.state\r\n    const targetOption = selectedOptions[0]; //选中的option对象\r\n    targetOption.loading = true; //显示loading\r\n\r\n    //根据选中的一级分类 请求获取对应的二级分类列表\r\n    const subCategorys = await this.getCategorys(targetOption.value)\r\n    targetOption.loading = false; //隐藏loading\r\n    if(subCategorys && subCategorys.length>0){ //如果二级分类数组有数据 且数量大于0\r\n      //生成一个二级列表的options\r\n      const childOptions = subCategorys.map(c=>({\r\n        value: c._id,\r\n        label: c.name,\r\n        isLeaf: true, //是叶子(即是最后一级)\r\n      }))\r\n      //关联到上一级的option上\r\n      targetOption.children = childOptions //二级列表项\r\n    }else{ //如果没有二级列表\r\n      targetOption.isLeaf = true //则是叶子 不显示箭头\r\n    }\r\n    this.setState({options:[...options]}) //更新options状态    \r\n  };\r\n\r\n  //【提交】表单\r\n  onFinish = async (values) => {\r\n    // console.log(values); //查看方法本身能收集到的数据values\r\n    //【1】收集数据\r\n    //获取[商品图片]的数据\r\n    const imgs = this.pw.current.getImgs()\r\n    values.product.imgs = imgs\r\n    //获取[商品详情]的数据    \r\n    const detail = this.editor.current.getDetail()\r\n    values.product.detail = detail\r\n    //获取[分类id]的数据\r\n    const {categoryIds} = values.product\r\n    let pCategoryId,categoryId\r\n    if(categoryIds.length===1){ //如果categoryIds中只有一个数据\r\n      pCategoryId = '0' //则父id为0 即一级分类列表\r\n      categoryId = categoryIds[0] //此数据为:当前分类id\r\n    }else{ //如果categoryIds中有两个数据\r\n      pCategoryId = categoryIds[0] //第一个数据:父id\r\n      categoryId = categoryIds[1] //第二个数据:当前分类id\r\n    }\r\n    values.product.pCategoryId = pCategoryId //将父id添加到product对应属性上\r\n    values.product.categoryId = categoryId //将分类id添加到product对应属性上\r\n    //获取[_id]的数据\r\n    if(this.isUpdate){ //如果是【修改分类】才需要添加_id属性(【添加分类】不需要该属性)\r\n      values.product._id = this.product._id\r\n    }    \r\n    console.log(values); //查看自定义方法后 可收集到的数据values\r\n\r\n    //【2】调用接口请求函数去[添加/修改]\r\n    const result = await reqAddOrUpdateProduct(values.product)\r\n\r\n    //【3】根据结果 显示提示信息\r\n    if(result.status===0){\r\n      message.success(`${this.isUpdate ? '修改':'添加'}商品成功！`)\r\n      this.props.history.goBack()\r\n    }else{\r\n      message.error(`${this.isUpdate ? '修改':'添加'}商品失败！`)\r\n    }\r\n  };\r\n\r\n  UNSAFE_componentWillMount(){\r\n    //取出携带的state\r\n    const product = this.props.location.state //如果是[添加商品]则没有值 否则有值\r\n    //保存[是否为'修改商品']的标识\r\n    this.isUpdate = !!product //!product:取反变成布尔值 !!product:再次取反 变为原值\r\n    //取出当前product 保存到this中(如果没有则保存的是{})\r\n    this.product = product || {}\r\n  }\r\n  componentDidMount(){\r\n    this.getCategorys('0') //请求一级分类列表\r\n  }\r\n\r\n  render() {\r\n    const {isUpdate, product} = this\r\n    const {pCategoryId,categoryId,imgs,detail} = product\r\n    const categoryIds = [] //接收级联分类ID的数组\r\n    if(isUpdate){ //【修改商品】\r\n      if(pCategoryId==='0'){ //如果商品是一级分类\r\n        categoryIds.push(categoryId) //只显示当前商品分类\r\n      }else{ //如果商品是二级分类\r\n        categoryIds.push(pCategoryId) //当前商品分类 父级的id\r\n        categoryIds.push(categoryId) //当前商品分类 自身的id\r\n      }\r\n    }\r\n    const {options} = this.state\r\n\r\n    const title = (\r\n      <LinkButton onClick={() => this.props.history.goBack()}>\r\n        <ArrowLeftOutlined style={{ marginRight: 10, color: '#1DA57A' }} />\r\n        {isUpdate ? '修改商品' : '添加商品'}\r\n      </LinkButton>)\r\n\r\n    //指定Form布局的配置对象\r\n    const layout = {\r\n      labelCol: {span: 4,}, //左侧label的宽度\r\n      wrapperCol: {span: 12,}, //右侧包裹的宽度\r\n    };\r\n    const validateMessages = {required: '${label}必须输入！',};\r\n\r\n    return (\r\n      <Card title={title} className='product-subpage-title'>\r\n        <Form {...layout} name=\"addupdateProduct\" onFinish={this.onFinish} \r\n          validateMessages={validateMessages} \r\n          initialValues={{ \r\n            product:{\r\n              name: product.name,\r\n              desc: product.desc,\r\n              price: product.price,\r\n              categoryIds: categoryIds,\r\n              imgs: product.imgs,\r\n              detail: product.detail,\r\n            }\r\n          }}\r\n        >\r\n          <Form.Item name={['product', 'name']} label=\"商品名称\" rules={[{required: true,},]}>\r\n            <Input placeholder='输入商品名称'/>\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'desc']} label=\"商品描述\" rules={[{required: true,},]}>\r\n            <Input.TextArea placeholder='输入商品描述' autoSize={{minRows:2,maxRows:6}} allowClear={true}/>\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'price']} label=\"商品价格\"\r\n           rules={[\r\n             {required: true,},\r\n             {validator: (_, value) => value>0 ? Promise.resolve() : Promise.reject('商品价格必须大于0'),}\r\n           ]}>\r\n            <Input placeholder='输入商品价格' type='number' addonAfter=\"元\"/>\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'categoryIds']} label=\"商品分类\" rules={[{required: true,},]}>\r\n            <Cascader placeholder={'选择商品分类'}\r\n              options={options} loadData={this.loadData} onChange={this.onChange} changeOnSelect />\r\n            {/* options：需要显示的列表数据数组\r\n            loadData(实现动态加载选项)：选择某个列表项时 加载下一集列表的监听回调 */}\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'imgs']} label=\"商品图片\">\r\n            <PicturesWall ref={this.pw} imgs={imgs} />\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'detail']} label=\"商品详情\">\r\n            <RichTextEditor ref={this.editor} detail={detail}/>\r\n          </Form.Item>\r\n          <Form.Item wrapperCol={{ ...layout.wrapperCol, offset: 4 }}>\r\n            <Button type=\"primary\" htmlType=\"submit\">提交</Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\pictures-wall.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\bar\\bar.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\rich-text-editor.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\AddCategory.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\UpdateCategory.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\AddRole.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\UpdateRole.jsx",[],{"ruleId":"169","replacedBy":"170"},{"ruleId":"171","replacedBy":"172"},{"ruleId":"169","replacedBy":"173"},{"ruleId":"171","replacedBy":"174"},{"ruleId":"175","severity":1,"message":"176","line":2,"column":1,"nodeType":"177","endLine":4,"endColumn":2},{"ruleId":"169","replacedBy":"178"},{"ruleId":"171","replacedBy":"179"},{"ruleId":"175","severity":1,"message":"176","line":5,"column":1,"nodeType":"177","endLine":15,"endColumn":2},{"ruleId":"169","replacedBy":"180"},{"ruleId":"171","replacedBy":"181"},{"ruleId":"169","replacedBy":"182"},{"ruleId":"171","replacedBy":"183"},{"ruleId":"169","replacedBy":"184"},{"ruleId":"171","replacedBy":"185"},{"ruleId":"169","replacedBy":"186"},{"ruleId":"171","replacedBy":"187"},{"ruleId":"188","severity":1,"message":"189","line":41,"column":10,"nodeType":"190","messageId":"191","endLine":41,"endColumn":14},{"ruleId":"169","replacedBy":"192"},{"ruleId":"171","replacedBy":"193"},{"ruleId":"194","severity":1,"message":"195","line":169,"column":41,"nodeType":"196","messageId":"197","endLine":169,"endColumn":56},"no-native-reassign",["198"],"no-negated-in-lhs",["199"],["198"],["199"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration",["198"],["199"],["198"],["199"],["198"],["199"],["198"],["199"],["198"],["199"],"no-unused-vars","'form' is assigned a value but never used.","Identifier","unusedVar",["198"],["199"],"no-template-curly-in-string","Unexpected template string expression.","Literal","unexpectedTemplateExpression","no-global-assign","no-unsafe-negation"]