[{"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\App.js":"1","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\index.js":"2","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\login\\login.jsx":"3","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\api\\ajax.js":"4","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\api\\index.js":"5","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\memoryUtils.js":"6","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\admin\\admin.jsx":"7","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\storageUtils.js":"8","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\left-nav\\index.jsx":"9","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\header\\index.jsx":"10","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\home\\home.jsx":"11","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\category.jsx":"12","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\product.jsx":"13","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\line\\line.jsx":"14","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\user\\user.jsx":"15","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\pie\\pie.jsx":"16","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\config\\menuConfig.js":"17","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\dateUtils.js":"18","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\link-btn\\index.jsx":"19","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\Updatecategory.jsx":"20","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\role.jsx":"21","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\Addcategory.jsx":"22","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\detail.jsx":"23","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\home.jsx":"24","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\constants.js":"25","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\add-update.jsx":"26","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\pictures-wall.jsx":"27","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\bar\\bar.jsx":"28","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\rich-text-editor.jsx":"29","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\AddCategory.jsx":"30","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\UpdateCategory.jsx":"31","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\AddRole.jsx":"32","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\UpdateRole.jsx":"33"},{"size":533,"mtime":1611625858147,"results":"34","hashOfConfig":"35"},{"size":473,"mtime":1611662385300,"results":"36","hashOfConfig":"35"},{"size":4802,"mtime":1611718842304,"results":"37","hashOfConfig":"35"},{"size":1114,"mtime":1611659833437,"results":"38","hashOfConfig":"35"},{"size":4293,"mtime":1612359880820,"results":"39","hashOfConfig":"35"},{"size":116,"mtime":1611660877319,"results":"40","hashOfConfig":"35"},{"size":1914,"mtime":1612253490335,"results":"41","hashOfConfig":"35"},{"size":655,"mtime":1611662070932,"results":"42","hashOfConfig":"35"},{"size":3491,"mtime":1612085844211,"results":"43","hashOfConfig":"35"},{"size":3568,"mtime":1612261772394,"results":"44","hashOfConfig":"35"},{"size":246,"mtime":1611808289258,"results":"45","hashOfConfig":"35"},{"size":5536,"mtime":1612320059096,"results":"46","hashOfConfig":"35"},{"size":675,"mtime":1612076245178,"results":"47","hashOfConfig":"35"},{"size":178,"mtime":1611721065135,"results":"48","hashOfConfig":"35"},{"size":3800,"mtime":1612362587325,"results":"49","hashOfConfig":"35"},{"size":173,"mtime":1611721086898,"results":"50","hashOfConfig":"35"},{"size":1439,"mtime":1611723638769,"results":"51","hashOfConfig":"35"},{"size":924,"mtime":1611803917468,"results":"52","hashOfConfig":"35"},{"size":194,"mtime":1611807729166,"results":"53","hashOfConfig":"35"},{"size":2061,"mtime":1612319974401,"results":"54","hashOfConfig":"35"},{"size":3736,"mtime":1612356193891,"results":"55","hashOfConfig":"35"},{"size":2456,"mtime":1612319968020,"results":"56","hashOfConfig":"35"},{"size":3264,"mtime":1612153036701,"results":"57","hashOfConfig":"35"},{"size":4643,"mtime":1612171590054,"results":"58","hashOfConfig":"35"},{"size":307,"mtime":1612347600686,"results":"59","hashOfConfig":"35"},{"size":9210,"mtime":1612259313663,"results":"60","hashOfConfig":"35"},{"size":4654,"mtime":1612258950407,"results":"61","hashOfConfig":"35"},{"size":176,"mtime":1611721038620,"results":"62","hashOfConfig":"35"},{"size":2800,"mtime":1612256631931,"results":"63","hashOfConfig":"35"},{"size":2456,"mtime":1612319991522,"results":"64","hashOfConfig":"35"},{"size":2061,"mtime":1612319982433,"results":"65","hashOfConfig":"35"},{"size":1594,"mtime":1612323251672,"results":"66","hashOfConfig":"35"},{"size":2015,"mtime":1612353119039,"results":"67","hashOfConfig":"35"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},"dqx17m",{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"73"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"83"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"86","messages":"87","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"88","usedDeprecatedRules":"89"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"70"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"103"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"106"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"109"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"124"},{"filePath":"125","messages":"126","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"103"},{"filePath":"127","messages":"128","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"129","messages":"130","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"131"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"134","messages":"135","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"138","messages":"139","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"140","messages":"141","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"142","messages":"143","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"144","messages":"145","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\App.js",[],["146","147"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\index.js",[],["148","149"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\login\\login.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\api\\ajax.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\api\\index.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\memoryUtils.js",["150"],"/* 用来在内存保存一些数据的工具模块 */\r\nexport default {\r\n  user: {}, //保存当前登录的user\r\n}",["151","152"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\admin\\admin.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\storageUtils.js",["153"],"/* 进行local数据存储管理的工具模块 */\r\nimport store from 'store'\r\n\r\nconst USER_KEY = 'user_key'\r\nexport default {  \r\n  saveUser(user){ //保存user\r\n    store.set(USER_KEY, user)\r\n  },  \r\n  getUser(){ //读取user\r\n    return store.get(USER_KEY) || {}\r\n  },  \r\n  removeUser(){ //删除user\r\n    store.remove(USER_KEY)\r\n  }\r\n}\r\n\r\n//原生写法\r\n/* export default {  \r\n  saveUser(user){ //保存user\r\n    localStorage.setItem(USER_KEY, JSON.stringify(user))\r\n  },  \r\n  getUser(){ //读取user\r\n    return JSON.parse(localStorage.getItem(USER_KEY) || '{}')\r\n  },  \r\n  removeUser(){ //删除user\r\n    localStorage.removeItem(USER_KEY)\r\n  }\r\n} */",["154","155"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\left-nav\\index.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\header\\index.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\home\\home.jsx",[],["156","157"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\category.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\product.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\line\\line.jsx",[],["158","159"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\user\\user.jsx",["160","161"],"/* 用户管理路由 */\r\nimport React, { Component } from \"react\";\r\nimport { Card, Table, Button, message, Modal } from 'antd';\r\n\r\nimport LinkButton from '../../components/link-btn';\r\nimport { formatDate } from \"../../utils/dateUtils\";\r\nimport { PAGE_SIZE } from \"../../utils/constants\";\r\nimport {reqUsers,reqDeleteUsers,reqAddOrUpdateUsers, reqDeleteImg} from '../../api'\r\n\r\nexport default class User extends Component {\r\n  state = {\r\n    users: [], //列表中的所有用户\r\n  }\r\n\r\n  //根据role的数组 生成包含所有角色名称的对象(属性名用角色id值)\r\n  initRoleNames = (roles) => {\r\n    const roleNames = roles.reduce((pre,role)=>{\r\n      pre[role._id] = role.name\r\n      return pre\r\n    },{})\r\n    //将角色name的数组保存到this中\r\n    this.roleNames = roleNames\r\n  }\r\n  //初始化Table所有列的数组\r\n  initColumns = ()=>{\r\n    //表格-列\r\n    this.columns = [\r\n      {title: '用户名', dataIndex: 'username'}, //dataIndex 显示数据对应的属性名\r\n      // {title: '密码', dataIndex: 'password'},\r\n      {title: '电话', dataIndex: 'phone'},\r\n      {title: '邮箱', dataIndex: 'email'},\r\n      {title: '所属角色', dataIndex: 'role_id',render:role_id=>this.roleNames[role_id]},\r\n      {title: '注册时间', dataIndex: 'create_time', render: formatDate},\r\n      {title: '操作',\r\n        render: (user) => ( //返回需要显示的界面标签\r\n          <span>\r\n            <LinkButton>修改</LinkButton>\r\n            <LinkButton onClick={()=>this.deleteUsers(user)}>删除</LinkButton>\r\n          </span>\r\n        ),\r\n      },\r\n    ];\r\n  }\r\n  //获取用户列表并显示\r\n  getUsers = async ()=>{\r\n    const result = await reqUsers()\r\n    if(result.status===0){\r\n      const {users,roles} = result.data\r\n      //初始化生成一个包含所有角色名的对象容器{_id1:name1,_id2:name2}\r\n      this.initRoleNames(roles)\r\n      this.setState({users,roles})\r\n    }else{\r\n      message.error('获取用户列表失败！')\r\n    }\r\n  }\r\n  //创建/修改用户\r\n  addOrUpdateUsers = async ()=>{\r\n    // const result = await reqAddCategorys(parentId,categoryName)\r\n    // if (result.status === 0) {      \r\n    //   if(parentId===this.state.parentId){ //如果是为当前分类列表添加\r\n    //     this.getCategorys() //重新获取当前分类列表 并刷新显示\r\n    //   }else if(parentId==='0'){ //如果是为一级分类列表添加(刷新后仍然显示当前分类列表)\r\n    //     this.getCategorys('0') //重新获取一级分类列表 但不跳转显示为一级列表\r\n    //   }\r\n    //   //弹出提示框 表示添加成功\r\n    //   message.success('已成功添加新分类：' + categoryName);\r\n    // }\r\n  }\r\n  //删除用户\r\n  deleteUsers = (user)=>{\r\n    Modal.confirm({\r\n      title: `确认删除${user.username}吗？`,\r\n      okText: '确定',\r\n      cancelText: '取消',\r\n      onOk: async ()=>{\r\n        const result = await reqDeleteUsers(user._id)\r\n        if(result.status===0){\r\n          message.success('删除用户成功！')\r\n          this.getUsers() //重新获取列表并显示\r\n        }else{\r\n          message.error('删除用户失败！')\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  //为第一次render()准备数据\r\n  UNSAFE_componentWillMount(){\r\n    this.initColumns()\r\n  }\r\n  //执行异步任务：发异步ajax请求\r\n  componentDidMount(){\r\n    this.getUsers()\r\n  }\r\n\r\n  render(){\r\n    const {users} = this.state //读取状态数据\r\n    const title = <Button type='primary'>创建用户</Button> //card左侧标题=>按钮\r\n    return (\r\n      <Card title={title}>\r\n        <Table bordered rowKey='_id'\r\n          columns={this.columns} dataSource={users}\r\n          pagination={{defaultPageSize:PAGE_SIZE, showQuickJumper:true}} \r\n        />\r\n      </Card>\r\n    )\r\n  }\r\n}","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\pie\\pie.jsx",[],["162","163"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\config\\menuConfig.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\dateUtils.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\components\\link-btn\\index.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\Updatecategory.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\role.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\Addcategory.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\detail.jsx",[],["164","165"],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\home.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\utils\\constants.js",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\add-update.jsx",["166"],"/* Product的[添加和更新的]子路由组件 */\r\nimport React, { Component } from \"react\";\r\nimport { Card, Form, Input, Button, Cascader, message } from \"antd\";\r\nimport { ArrowLeftOutlined } from '@ant-design/icons';\r\n\r\nimport LinkButton from '../../components/link-btn'\r\nimport PicturesWall from \"./pictures-wall\";\r\nimport RichTextEditor from \"./rich-text-editor\";\r\nimport {reqCategorys,reqAddOrUpdateProduct} from '../../api'\r\n\r\nexport default class ProductAddUpdate extends Component {\r\n  state = {\r\n    options: [], //一级列表项\r\n  }\r\n  constructor(props){\r\n    super(props)\r\n    //创建用来保存ref标识的标签对象的容器\r\n    this.pw = React.createRef() //商品图片\r\n    this.editor = React.createRef() //商品详情\r\n  }\r\n  //【分类】初始化选项列表(一级)\r\n  initOptions = async (categorys)=>{\r\n    //根据categorys生成options的数组\r\n    const options = categorys.map(c=>({\r\n      value: c._id,\r\n      label: c.name,\r\n      isLeaf: false, //不是叶子(即不是最后一级)\r\n    }))\r\n\r\n    //【修改商品】[二级分类商品]的[更新]\r\n    const {isUpdate,product} = this\r\n    const {pCategoryId} = product\r\n    if(isUpdate && pCategoryId!=='0'){ //如果是一个[二级分类商品]的[更新]\r\n      //获取对应的二级分类列表\r\n      const subCategorys = await this.getCategorys(pCategoryId)\r\n      //生成二级下拉列表的options\r\n      const childOptions = subCategorys.map(c=>({\r\n        value: c._id,\r\n        label: c.name,\r\n        isLeaf: true\r\n      }))\r\n      //找到当前商品对应的一级option对象\r\n      const targetOption = options.find(option => option.value===pCategoryId)\r\n      //关联到对应的一级option上\r\n      targetOption.children = childOptions\r\n    }\r\n\r\n    //更新options的状态\r\n    this.setState({options})\r\n  }\r\n  //【分类】异步获取一级/二级分类列表 并显示\r\n  getCategorys = async (parentId)=>{\r\n    const result = await reqCategorys(parentId) //{status:0,data:categorys}\r\n    if(result.status===0){\r\n      const categorys = result.data\r\n      if(parentId==='0'){ //一级分类列表\r\n        this.initOptions(categorys) //初始化选项列表(一级) 并显示\r\n      }else{ //二级分类列表\r\n        return categorys //返回二级列表的categorys\r\n        /* 当前async函数返回的promise会成功 且value为categorys */\r\n      }\r\n    }\r\n  }\r\n  //【分类】选项变化\r\n  onChange = (value, selectedOptions) => {\r\n    // console.log(value, selectedOptions);\r\n  };\r\n  //【分类】用于加载下一级列表的回调函数\r\n  loadData = async selectedOptions => {\r\n    const {options} = this.state\r\n    const targetOption = selectedOptions[0]; //选中的option对象\r\n    targetOption.loading = true; //显示loading\r\n\r\n    //根据选中的一级分类 请求获取对应的二级分类列表\r\n    const subCategorys = await this.getCategorys(targetOption.value)\r\n    targetOption.loading = false; //隐藏loading\r\n    if(subCategorys && subCategorys.length>0){ //如果二级分类数组有数据 且数量大于0\r\n      //生成一个二级列表的options\r\n      const childOptions = subCategorys.map(c=>({\r\n        value: c._id,\r\n        label: c.name,\r\n        isLeaf: true, //是叶子(即是最后一级)\r\n      }))\r\n      //关联到上一级的option上\r\n      targetOption.children = childOptions //二级列表项\r\n    }else{ //如果没有二级列表\r\n      targetOption.isLeaf = true //则是叶子 不显示箭头\r\n    }\r\n    this.setState({options:[...options]}) //更新options状态    \r\n  };\r\n\r\n  //【提交】表单\r\n  onFinish = async (values) => {\r\n    // console.log(values); //查看方法本身能收集到的数据values\r\n    //【1】收集数据\r\n    //获取[商品图片]的数据\r\n    const imgs = this.pw.current.getImgs()\r\n    values.product.imgs = imgs\r\n    //获取[商品详情]的数据    \r\n    const detail = this.editor.current.getDetail()\r\n    values.product.detail = detail\r\n    //获取[分类id]的数据\r\n    const {categoryIds} = values.product\r\n    let pCategoryId,categoryId\r\n    if(categoryIds.length===1){ //如果categoryIds中只有一个数据\r\n      pCategoryId = '0' //则父id为0 即一级分类列表\r\n      categoryId = categoryIds[0] //此数据为:当前分类id\r\n    }else{ //如果categoryIds中有两个数据\r\n      pCategoryId = categoryIds[0] //第一个数据:父id\r\n      categoryId = categoryIds[1] //第二个数据:当前分类id\r\n    }\r\n    values.product.pCategoryId = pCategoryId //将父id添加到product对应属性上\r\n    values.product.categoryId = categoryId //将分类id添加到product对应属性上\r\n    //获取[_id]的数据\r\n    if(this.isUpdate){ //如果是【修改分类】才需要添加_id属性(【添加分类】不需要该属性)\r\n      values.product._id = this.product._id\r\n    }    \r\n    console.log(values); //查看自定义方法后 可收集到的数据values\r\n\r\n    //【2】调用接口请求函数去[添加/修改]\r\n    const result = await reqAddOrUpdateProduct(values.product)\r\n\r\n    //【3】根据结果 显示提示信息\r\n    if(result.status===0){\r\n      message.success(`${this.isUpdate ? '修改':'添加'}商品成功！`)\r\n      this.props.history.goBack()\r\n    }else{\r\n      message.error(`${this.isUpdate ? '修改':'添加'}商品失败！`)\r\n    }\r\n  };\r\n\r\n  UNSAFE_componentWillMount(){\r\n    //取出携带的state\r\n    const product = this.props.location.state //如果是[添加商品]则没有值 否则有值\r\n    //保存[是否为'修改商品']的标识\r\n    this.isUpdate = !!product //!product:取反变成布尔值 !!product:再次取反 变为原值\r\n    //取出当前product 保存到this中(如果没有则保存的是{})\r\n    this.product = product || {}\r\n  }\r\n  componentDidMount(){\r\n    this.getCategorys('0') //请求一级分类列表\r\n  }\r\n\r\n  render() {\r\n    const {isUpdate, product} = this\r\n    const {pCategoryId,categoryId,imgs,detail} = product\r\n    const categoryIds = [] //接收级联分类ID的数组\r\n    if(isUpdate){ //【修改商品】\r\n      if(pCategoryId==='0'){ //如果商品是一级分类\r\n        categoryIds.push(categoryId) //只显示当前商品分类\r\n      }else{ //如果商品是二级分类\r\n        categoryIds.push(pCategoryId) //当前商品分类 父级的id\r\n        categoryIds.push(categoryId) //当前商品分类 自身的id\r\n      }\r\n    }\r\n    const {options} = this.state\r\n\r\n    const title = (\r\n      <LinkButton onClick={() => this.props.history.goBack()}>\r\n        <ArrowLeftOutlined style={{ marginRight: 10, color: '#1DA57A' }} />\r\n        {isUpdate ? '修改商品' : '添加商品'}\r\n      </LinkButton>)\r\n\r\n    //指定Form布局的配置对象\r\n    const layout = {\r\n      labelCol: {span: 4,}, //左侧label的宽度\r\n      wrapperCol: {span: 12,}, //右侧包裹的宽度\r\n    };\r\n    const validateMessages = {required: '${label}必须输入！',};\r\n\r\n    return (\r\n      <Card title={title} className='product-subpage-title'>\r\n        <Form {...layout} name=\"addupdateProduct\" onFinish={this.onFinish} \r\n          validateMessages={validateMessages} \r\n          initialValues={{ \r\n            product:{\r\n              name: product.name,\r\n              desc: product.desc,\r\n              price: product.price,\r\n              categoryIds: categoryIds,\r\n              imgs: product.imgs,\r\n              detail: product.detail,\r\n            }\r\n          }}\r\n        >\r\n          <Form.Item name={['product', 'name']} label=\"商品名称\" rules={[{required: true,},]}>\r\n            <Input placeholder='输入商品名称'/>\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'desc']} label=\"商品描述\" rules={[{required: true,},]}>\r\n            <Input.TextArea placeholder='输入商品描述' autoSize={{minRows:2,maxRows:6}} allowClear={true}/>\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'price']} label=\"商品价格\"\r\n           rules={[\r\n             {required: true,},\r\n             {validator: (_, value) => value>0 ? Promise.resolve() : Promise.reject('商品价格必须大于0'),}\r\n           ]}>\r\n            <Input placeholder='输入商品价格' type='number' addonAfter=\"元\"/>\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'categoryIds']} label=\"商品分类\" rules={[{required: true,},]}>\r\n            <Cascader placeholder={'选择商品分类'}\r\n              options={options} loadData={this.loadData} onChange={this.onChange} changeOnSelect />\r\n            {/* options：需要显示的列表数据数组\r\n            loadData(实现动态加载选项)：选择某个列表项时 加载下一集列表的监听回调 */}\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'imgs']} label=\"商品图片\">\r\n            <PicturesWall ref={this.pw} imgs={imgs} />\r\n          </Form.Item>\r\n          <Form.Item name={['product', 'detail']} label=\"商品详情\">\r\n            <RichTextEditor ref={this.editor} detail={detail}/>\r\n          </Form.Item>\r\n          <Form.Item wrapperCol={{ ...layout.wrapperCol, offset: 4 }}>\r\n            <Button type=\"primary\" htmlType=\"submit\">提交</Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}","D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\pictures-wall.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\bar\\bar.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\product\\rich-text-editor.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\AddCategory.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\category\\UpdateCategory.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\AddRole.jsx",[],"D:\\Personal\\FrontendStudy\\ExercisesWithVSCode\\Part_4\\02_ProjBgManagement\\react-admin_client\\src\\pages\\role\\UpdateRole.jsx",[],{"ruleId":"167","replacedBy":"168"},{"ruleId":"169","replacedBy":"170"},{"ruleId":"167","replacedBy":"171"},{"ruleId":"169","replacedBy":"172"},{"ruleId":"173","severity":1,"message":"174","line":2,"column":1,"nodeType":"175","endLine":4,"endColumn":2},{"ruleId":"167","replacedBy":"176"},{"ruleId":"169","replacedBy":"177"},{"ruleId":"173","severity":1,"message":"174","line":5,"column":1,"nodeType":"175","endLine":15,"endColumn":2},{"ruleId":"167","replacedBy":"178"},{"ruleId":"169","replacedBy":"179"},{"ruleId":"167","replacedBy":"180"},{"ruleId":"169","replacedBy":"181"},{"ruleId":"167","replacedBy":"182"},{"ruleId":"169","replacedBy":"183"},{"ruleId":"184","severity":1,"message":"185","line":8,"column":33,"nodeType":"186","messageId":"187","endLine":8,"endColumn":52},{"ruleId":"184","severity":1,"message":"188","line":8,"column":54,"nodeType":"186","messageId":"187","endLine":8,"endColumn":66},{"ruleId":"167","replacedBy":"189"},{"ruleId":"169","replacedBy":"190"},{"ruleId":"167","replacedBy":"191"},{"ruleId":"169","replacedBy":"192"},{"ruleId":"193","severity":1,"message":"194","line":169,"column":41,"nodeType":"195","messageId":"196","endLine":169,"endColumn":56},"no-native-reassign",["197"],"no-negated-in-lhs",["198"],["197"],["198"],"import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration",["197"],["198"],["197"],["198"],["197"],["198"],["197"],["198"],"no-unused-vars","'reqAddOrUpdateUsers' is defined but never used.","Identifier","unusedVar","'reqDeleteImg' is defined but never used.",["197"],["198"],["197"],["198"],"no-template-curly-in-string","Unexpected template string expression.","Literal","unexpectedTemplateExpression","no-global-assign","no-unsafe-negation"]